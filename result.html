<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEER - Survey Results</title>
    <link rel="icon" href="assets/Logo.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            overflow-x: hidden;
            background: #0a0a0a;
            color: #ffffff;
            min-height: 100vh;
        }

        /* Particles Background */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        /* Language Toggle */
        .lang-toggle {
            display: flex;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 0.5rem;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .lang-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            color: #fff;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s;
            font-weight: 500;
        }

        .lang-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .lang-btn:hover {
            background: rgba(102, 126, 234, 0.3);
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1.5rem 5%;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        nav .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
        }
        
        nav .right-section {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
        }
        
        .logo img {
            width: 45px;
            height: 45px;
            object-fit: contain;
            border-radius: 12px;
        }

        .nav-actions {
            display: flex;
            gap: 1rem;
        }

        .nav-btn {
            padding: 0.8rem 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-btn.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-btn.primary:hover {
            background: linear-gradient(135deg, #7689f5 0%, #8557b3 100%);
        }

        /* Main Content */
        .main-content {
            position: relative;
            z-index: 2;
            padding: 8rem 5% 4rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .results-header {
            text-align: center;
            margin-bottom: 3rem;
            animation: fadeInUp 1s ease-out;
        }

        .results-header h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .results-header p {
            font-size: 1.2rem;
            color: #b0b0b0;
            line-height: 1.6;
        }

        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
            animation: fadeInUp 1s ease-out 0.2s;
            animation-fill-mode: both;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #b0b0b0;
            font-size: 1rem;
        }

        .no-data {
            text-align: center;
            padding: 4rem 2rem;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            animation: fadeInUp 1s ease-out 0.3s;
            animation-fill-mode: both;
        }

        .no-data h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #888;
        }

        .no-data p {
            color: #666;
            margin-bottom: 2rem;
        }

        .no-data-btn {
            padding: 1rem 2.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .no-data-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            animation: fadeInUp 1s ease-out;
            animation-fill-mode: both;
        }

        .chart-container.full-width {
            grid-column: 1 / -1;
        }

        .chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            color: #fff;
        }

        .chart-wrapper {
            position: relative;
            height: 350px;
            margin-bottom: 1rem;
        }

        .chart-wrapper.tall {
            height: 450px;
        }

        .chart-wrapper canvas {
            max-height: 100%;
        }

        /* Word Cloud Container */
        .wordcloud-section {
            margin-top: 3rem;
        }

        .wordcloud-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            animation: fadeInUp 1s ease-out 0.6s;
            animation-fill-mode: both;
        }

        .wordcloud-wrapper {
            position: relative;
            height: 400px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            overflow: hidden;
        }

        #wordcloud {
            width: 100%;
            height: 100%;
        }

        .text-responses {
            margin-top: 2rem;
            max-height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }

        .text-responses::-webkit-scrollbar {
            width: 8px;
        }

        .text-responses::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .text-responses::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.5);
            border-radius: 10px;
        }

        .text-responses::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.7);
        }

        .response-item {
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid #667eea;
            border-radius: 8px;
        }

        .response-item:last-child {
            margin-bottom: 0;
        }

        .response-time {
            font-size: 0.85rem;
            color: #888;
            margin-bottom: 0.5rem;
        }

        .response-text {
            color: #ccc;
            line-height: 1.6;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .results-header h1 {
                font-size: 2rem;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .chart-wrapper {
                height: 300px;
            }

            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <canvas id="particles-canvas"></canvas>

    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="logo" onclick="window.location.href='index.html'">
                <img src="assets/Logo.png" alt="SEER Logo">
                <span>SEER</span>
            </div>
            <div class="right-section">
                <div class="lang-toggle">
                    <button class="lang-btn active" id="lang-en" onclick="switchLanguage('en')">EN</button>
                    <button class="lang-btn" id="lang-zh" onclick="switchLanguage('zh')">中文</button>
                </div>
                <div class="nav-actions">
                    <a href="feedback.html" class="nav-btn primary" data-en="Take Survey" data-zh="填写问卷">Take Survey</a>
                    <a href="index.html" class="nav-btn" data-en="Home" data-zh="主页">Home</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <div class="results-header">
            <h1 data-en="Survey Results" data-zh="问卷统计结果">Survey Results</h1>
            <p data-en="Real-time analytics of user feedback" data-zh="用户反馈实时分析">Real-time analytics of user feedback</p>
        </div>

        <!-- Stats Overview -->
        <div class="stats-overview" id="statsOverview" style="display: none;">
            <div class="stat-card">
                <div class="stat-number" id="totalResponses">0</div>
                <div class="stat-label" data-en="Total Responses" data-zh="总回复数">Total Responses</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgExperience">0</div>
                <div class="stat-label" data-en="Avg. Experience Score" data-zh="平均体验评分">Avg. Experience Score</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgDesign">0</div>
                <div class="stat-label" data-en="Avg. Design Score" data-zh="平均设计评分">Avg. Design Score</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgRecommendation">0</div>
                <div class="stat-label" data-en="Avg. Recommendation" data-zh="平均推荐度">Avg. Recommendation</div>
            </div>
        </div>

        <!-- No Data Message -->
        <div class="no-data" id="noDataMessage">
            <h2 data-en="No Survey Data Yet" data-zh="暂无问卷数据">No Survey Data Yet</h2>
            <p data-en="Be the first to share your feedback!" data-zh="成为第一个分享反馈的人！">Be the first to share your feedback!</p>
            <a href="feedback.html" class="no-data-btn" data-en="Take the Survey" data-zh="填写问卷">Take the Survey</a>
        </div>

        <!-- Charts Section -->
        <div id="chartsSection" style="display: none;">
            <!-- Multiple Choice Charts -->
            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title" data-en="Most Attractive Feature" data-zh="最感兴趣的功能">Most Attractive Feature</h3>
                    <div class="chart-wrapper">
                        <canvas id="q1Chart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title" data-en="Target Audience" data-zh="目标用户群体">Target Audience</h3>
                    <div class="chart-wrapper">
                        <canvas id="q2Chart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title" data-en="Feature Completeness" data-zh="功能完整性">Feature Completeness</h3>
                    <div class="chart-wrapper">
                        <canvas id="q5Chart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <h3 class="chart-title" data-en="Rating Scores Distribution" data-zh="评分分布">Rating Scores Distribution</h3>
                    <div class="chart-wrapper">
                        <canvas id="ratingsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Rating Distribution Charts -->
            <div class="charts-grid">
                <div class="chart-container full-width">
                    <h3 class="chart-title" data-en="User Experience Ratings" data-zh="用户体验评分">User Experience Ratings</h3>
                    <div class="chart-wrapper tall">
                        <canvas id="experienceChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Word Cloud Section -->
            <div class="wordcloud-section">
                <div class="wordcloud-container">
                    <h3 class="chart-title" data-en="Feature Requests Word Cloud" data-zh="功能需求词云">Feature Requests Word Cloud</h3>
                    <div class="wordcloud-wrapper">
                        <canvas id="wordcloud"></canvas>
                    </div>
                </div>

                <!-- Text Responses for each question -->
                <div class="charts-grid" style="margin-top: 2rem;">
                    <div class="chart-container">
                        <h3 class="chart-title" data-en="Future Feature Requests" data-zh="未来功能需求">Future Feature Requests</h3>
                        <div class="text-responses" id="q7Responses"></div>
                    </div>

                    <div class="chart-container">
                        <h3 class="chart-title" data-en="Improvement Suggestions" data-zh="改进建议">Improvement Suggestions</h3>
                        <div class="text-responses" id="q8Responses"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="api-config.js"></script>
    <script src="particles.js"></script>
    <script>
        // Language switching functionality
        let currentLang = 'en';

        function switchLanguage(lang) {
            currentLang = lang;
            const htmlTag = document.documentElement;
            htmlTag.setAttribute('lang', lang);

            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('lang-' + lang).classList.add('active');

            // Update all translatable elements
            const elements = document.querySelectorAll('[data-en][data-zh]');
            elements.forEach(element => {
                const text = element.getAttribute('data-' + lang);
                if (element.tagName === 'A' || element.tagName === 'BUTTON' || element.tagName === 'P' || element.tagName === 'H1' || element.tagName === 'H2' || element.tagName === 'H3' || element.tagName === 'LI' || element.tagName === 'SPAN' || element.tagName === 'DIV') {
                    element.innerHTML = text;
                } else {
                    element.textContent = text;
                }
            });

            // Save language preference
            localStorage.setItem('seer_lang', lang);
        }

        // Load saved language preference
        const savedLang = localStorage.getItem('seer_lang');
        if (savedLang) {
            switchLanguage(savedLang);
        }

        // Load and process survey data
        async function loadSurveyData() {
            let surveys = [];
            
            // Try to load from API first
            if (window.SEER_API) {
                try {
                    surveys = await window.SEER_API.getSurveys();
                } catch (error) {
                    console.error('Error loading surveys from API:', error);
                    // Fallback to localStorage
                    surveys = JSON.parse(localStorage.getItem('seer_surveys') || '[]');
                }
            } else {
                // Fallback to localStorage
                surveys = JSON.parse(localStorage.getItem('seer_surveys') || '[]');
            }
            
            if (surveys.length === 0) {
                document.getElementById('noDataMessage').style.display = 'block';
                document.getElementById('statsOverview').style.display = 'none';
                document.getElementById('chartsSection').style.display = 'none';
                return;
            }

            document.getElementById('noDataMessage').style.display = 'none';
            document.getElementById('statsOverview').style.display = 'grid';
            document.getElementById('chartsSection').style.display = 'block';

            // Calculate stats
            const totalResponses = surveys.length;
            const avgExperience = (surveys.reduce((sum, s) => sum + s.responses.q3, 0) / totalResponses).toFixed(1);
            const avgDesign = (surveys.reduce((sum, s) => sum + s.responses.q4, 0) / totalResponses).toFixed(1);
            const avgRecommendation = (surveys.reduce((sum, s) => sum + (s.responses.q12 || s.responses.q10 || 0), 0) / totalResponses).toFixed(1);

            document.getElementById('totalResponses').textContent = totalResponses;
            document.getElementById('avgExperience').textContent = avgExperience;
            document.getElementById('avgDesign').textContent = avgDesign;
            document.getElementById('avgRecommendation').textContent = avgRecommendation;

            // Create charts
            createMultipleChoiceCharts(surveys);
            createRatingCharts(surveys);
            createWordCloud(surveys);
            displayTextResponses(surveys);
        }

        // Create multiple choice charts
        function createMultipleChoiceCharts(surveys) {
            const chartColors = [
                'rgba(102, 126, 234, 0.8)',
                'rgba(118, 75, 162, 0.8)',
                'rgba(240, 147, 251, 0.8)',
                'rgba(0, 209, 178, 0.8)'
            ];

            // Q1: Feature Category (Multi-select)
            const q1Data = {};
            surveys.forEach(s => {
                const responses = Array.isArray(s.responses.q1) ? s.responses.q1 : [s.responses.q1];
                responses.forEach(r => {
                    if (r) q1Data[r] = (q1Data[r] || 0) + 1;
                });
            });

            new Chart(document.getElementById('q1Chart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(q1Data),
                    datasets: [{
                        label: 'Number of Selections',
                        data: Object.values(q1Data),
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: { 
                                color: '#ffffff',
                                stepSize: 1
                            },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#ffffff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });

            // Q2: Target Audience
            const q2Data = {};
            surveys.forEach(s => {
                q2Data[s.responses.q2] = (q2Data[s.responses.q2] || 0) + 1;
            });

            new Chart(document.getElementById('q2Chart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(q2Data),
                    datasets: [{
                        data: Object.values(q2Data),
                        backgroundColor: chartColors,
                        borderWidth: 2,
                        borderColor: '#0a0a0a'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#ffffff',
                                padding: 15,
                                font: { size: 12 }
                            }
                        }
                    }
                }
            });

            // Q5: Feature Completeness
            const q5Data = {};
            surveys.forEach(s => {
                q5Data[s.responses.q5] = (q5Data[s.responses.q5] || 0) + 1;
            });

            new Chart(document.getElementById('q5Chart'), {
                type: 'pie',
                data: {
                    labels: Object.keys(q5Data),
                    datasets: [{
                        data: Object.values(q5Data),
                        backgroundColor: chartColors,
                        borderWidth: 2,
                        borderColor: '#0a0a0a'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#ffffff',
                                padding: 15,
                                font: { size: 12 }
                            }
                        }
                    }
                }
            });
        }

        // Create rating charts
        function createRatingCharts(surveys) {
            // Average ratings comparison
            const avgQ3 = surveys.reduce((sum, s) => sum + s.responses.q3, 0) / surveys.length;
            const avgQ4 = surveys.reduce((sum, s) => sum + s.responses.q4, 0) / surveys.length;
            const avgQ6 = surveys.reduce((sum, s) => sum + s.responses.q6, 0) / surveys.length;
            const avgQ12 = surveys.reduce((sum, s) => sum + (s.responses.q12 || s.responses.q10 || 0), 0) / surveys.length;

            new Chart(document.getElementById('ratingsChart'), {
                type: 'bar',
                data: {
                    labels: ['Experience', 'Design', 'Features', 'Recommendation'],
                    datasets: [{
                        label: 'Average Score',
                        data: [avgQ3, avgQ4, avgQ6, avgQ12],
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10,
                            ticks: { color: '#ffffff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#ffffff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });

            // Experience rating distribution
            const q3Distribution = Array(10).fill(0);
            surveys.forEach(s => {
                q3Distribution[s.responses.q3 - 1]++;
            });

            new Chart(document.getElementById('experienceChart'), {
                type: 'bar',
                data: {
                    labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                    datasets: [{
                        label: 'Number of Responses',
                        data: q3Distribution,
                        backgroundColor: 'rgba(118, 75, 162, 0.8)',
                        borderColor: 'rgba(118, 75, 162, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { 
                                color: '#ffffff',
                                stepSize: 1
                            },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#ffffff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        },
                        title: {
                            display: true,
                            text: 'Rating: 1 (Poor) to 10 (Excellent)',
                            color: '#b0b0b0'
                        }
                    }
                }
            });
        }

        // Create word cloud from text responses
        function createWordCloud(surveys) {
            // Combine all text responses
            const allText = surveys.map(s => 
                `${s.responses.q7} ${s.responses.q8}`
            ).join(' ').toLowerCase();

            // Extract words and count frequency
            const words = allText.match(/\b[a-z]{3,}\b/g) || [];
            const stopWords = ['the', 'and', 'for', 'that', 'with', 'this', 'from', 'are', 'more', 'can', 'would', 'could', 'should', 'also', 'have', 'has', 'been'];
            
            const wordFreq = {};
            words.forEach(word => {
                if (!stopWords.includes(word)) {
                    wordFreq[word] = (wordFreq[word] || 0) + 1;
                }
            });

            // Convert to word cloud format
            const wordList = Object.entries(wordFreq)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 50)
                .map(([word, freq]) => [word, freq * 5]);

            if (wordList.length > 0) {
                WordCloud(document.getElementById('wordcloud'), {
                    list: wordList,
                    gridSize: 8,
                    weightFactor: 3,
                    fontFamily: 'Arial, sans-serif',
                    color: function() {
                        const colors = ['#667eea', '#764ba2', '#f093fb', '#00d1b2'];
                        return colors[Math.floor(Math.random() * colors.length)];
                    },
                    rotateRatio: 0.3,
                    backgroundColor: 'transparent'
                });
            }
        }

        // Display text responses
        function displayTextResponses(surveys) {
            // Q7: Future features
            const q7Container = document.getElementById('q7Responses');
            q7Container.innerHTML = surveys.map(s => `
                <div class="response-item">
                    <div class="response-time">${new Date(s.timestamp).toLocaleString()}</div>
                    <div class="response-text">${s.responses.q7}</div>
                </div>
            `).join('');

            // Q8: Improvements
            const q8Container = document.getElementById('q8Responses');
            q8Container.innerHTML = surveys.map(s => `
                <div class="response-item">
                    <div class="response-time">${new Date(s.timestamp).toLocaleString()}</div>
                    <div class="response-text">${s.responses.q8}</div>
                </div>
            `).join('');
        }

        // Auto-refresh results every 30 seconds
        setInterval(async () => {
            if (window.SEER_API) {
                try {
                    const surveys = await window.SEER_API.getSurveys();
                    if (surveys.length > 0) {
                        location.reload();
                    }
                } catch (error) {
                    console.error('Auto-refresh error:', error);
                }
            }
        }, 30000);

        // Initialize
        loadSurveyData();

        // Initialize particles
        if (typeof initParticles === 'function') {
            initParticles();
        }
    </script>
</body>
</html>

